% kfold classifiers

subjects = {[1:7];[1:4];[1:6]}; % 1:11
areas = [1,2]; %
features = {[4],[1]}; % 

%{
comb_subj = [1,2,3, 5,6,7, 9,10,11, 13,14,15;...
    1,2,4, 5,6,8, 9,10,12, 13,14,16;...
    1,4,3, 5,8,7, 9,12,11, 13,16,15;...
    4,2,3, 8,6,7, 12,10,11, 16,14,15;];
comb_subj_test = [4,8,12,16;...
    3,7,11,15;...
    2,6,10,14;...
    1,5,9,13];
%}
comb_subj = [1, 3,4, 6,7, 9,10;...
    1, 3,5, 6,8, 9,11;...
    1, 5,4, 8,7, 11,10;...
    2, 3,4, 6,7, 9,10;...
    2, 3,5, 6,8, 9,11;...
    2, 5,4, 8,7, 11,10];
comb_subj_test = [2,5,8,11;...
    2,4,7,10;...
    2,3,6,9;...
    1,5,8,11;...
    1,4,7,10;...
    1,3,6,9];

limAreasClasses_temp = [];
idxPk_test_temp = [];
for i = 1:size(comb_subj,1)
    
    [idxPk_test, idxPk_trat, idxPk_train, limAreasClasses, cm_train] = parkinsonismIndex(subjects, areas, features, comb_subj(i,:), comb_subj_test(i,:), BiomarkerDataBase_EP, Labels_BM_EP, BiomarkerDataBase_trat, Labels_BM_trat, 'origine');
    limAreasClasses_temp(:,:,i) = limAreasClasses;
    idxPk_test_temp(:,i) = idxPk_test;

end

limAreasClasses_total = mean(limAreasClasses_temp, 3);
limAreasClassesMinMax_total = [min(limAreasClasses_temp(:,1,:), [], 3), max(limAreasClasses_temp(:,2,:), [], 3)];

disp('Areas limits of Parkinsonism Index')
disp(limAreasClasses_total)
disp('Areas min-max of Parkinsonism Index')
disp(limAreasClassesMinMax_total)
disp("Areas min-max of Parkinsonism Index percent")
disp(100*limAreasClassesMinMax_total./(max(max(limAreasClassesMinMax_total))))

